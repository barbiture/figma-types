{
  "$schema": "http://json-schema.org/schema",
  "definitions": {
    "Global": {
      "type": "object",
      "description": "Properties are shared across all nodes",
      "properties": {
        "id": {
          "type": "string",
          "description":
            "A string uniquely identifying this node within the document"
        },
        "name": {
          "type": "string",
          "description": "The name given to the node by the user in the tool"
        },
        "visible": {
          "type": "boolean",
          "description": "Whether or not the node is visible on the canvas"
        },
        "type": {
          "type": "string",
          "description": "The type of the node",
          "enum": [
            "DOCUMENT",
            "CANVAS",
            "FRAME",
            "GROUP",
            "VECTOR",
            "BOOLEAN",
            "STAR",
            "LINE",
            "ELLIPSE",
            "REGULAR_POLYGON",
            "RECTANGLE",
            "TEXT",
            "SLICE",
            "COMPONENT",
            "INSTANCE"
          ]
        }
      },
      "required": ["id", "name", "visible", "type"]
    },
    "Node": {
      "type": "object",
      "oneOf": [
        { "$ref": "#/definitions/Document" },
        { "$ref": "#/definitions/Canvas" }
      ]
    },
    "Document": {
      "type": "object",
      "allOf": [
        { "$ref": "#/definitions/Global" },
        {
          "properties": {
            "children": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/Node"
              },
              "description": "An array of canvases attached to the document"
            }
          }
        }
      ],
      "required": ["children"]
    },
    "Canvas": {
      "type": "object",
      "allOf": [
        { "$ref": "#/definitions/Global" },
        {
          "properties": {
            "children": {
              "type": "array",
              "items": {
                "$ref": "#/definitions/Node"
              },
              "description": "An array of top level layers on the canvas"
            },
            "backgroundColor": {
              "$ref": "#/definitions/Color",
              "description": "Background color of the canvas"
            }
          }
        }
      ],
      "required": ["children", "backgroundColor"]
    },
    "Comment": {
      "type": "object",
      "description": "A comment or reply left by a user",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for comment"
        },
        "file_key": {
          "type": "string",
          "description": "The file in which the comment lives"
        },
        "parent_id": {
          "type": "string",
          "description":
            "If present, the id of the comment to which this is the reply"
        },
        "user": {
          "$ref": "#/definitions/User",
          "description": "The user who left the comment"
        }
      },
      "required": ["id", "file_key", "user"]
    },
    "User": {
      "type": "object",
      "description": "A description of a user",
      "properties": {
        "handle": { "type": "string" },
        "img_url": { "type": "string" }
      },
      "required": ["handle", "img_url"]
    },
    "Color": {
      "type": "object",
      "description": "An RGBA color",
      "properties": {
        "r": {
          "type": "number",
          "description": "Red channel value, between 0 and 1"
        },
        "g": {
          "type": "number",
          "description": "Green channel value, between 0 and 1"
        },
        "b": {
          "type": "number",
          "description": "Blue channel value, between 0 and 1"
        },
        "a": {
          "type": "number",
          "description": "Alpha channel value, between 0 and 1"
        }
      },
      "required": ["r", "g", "b", "a"]
    },
    "Constraint": {
      "type": "object",
      "description": "Sizing constraint for exports",
      "properties": {
        "type": {
          "enum": ["SCALE", "WIDTH", "HEIGHT"],
          "description":
            "Type of constraint to apply; string enum with potential values below\n\n  * \"SCALE\": Scale by value\n  * \"WIDTH\": Scale proportionally and set width to value\n  * \"HEIGHT\": Scale proportionally and set height to value"
        },
        "value": {
          "type": "number",
          "description": "See type property for effect of this field"
        }
      },
      "required": ["type"]
    },
    "BlendMode": {
      "type": "string",
      "description": "Enum describing how layer blends with layers below",
      "enum": [
        "PASS_THROUGH",
        "NORMAL",

        "DARKEN",
        "MULTIPLY",
        "LINEAR_BURN",
        "COLOR_BURN",

        "LIGHTEN",
        "SCREEN",
        "LINEAR_DODGE",
        "COLOR_DODGE",

        "OVERLAY",
        "SOFT_LIGHT",
        "HARD_LIGHT",

        "DIFFERENCE",
        "EXCLUSION",

        "HUE",
        "SATURATION",
        "COLOR",
        "LUMINOSITY"
      ]
    }
  }
}
